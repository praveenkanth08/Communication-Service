2025-06-02 11:15:49 [ERROR]: Template generation failed for SUBMISSION_SUCCESS: Template SUBMISSION_SUCCESS not found {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS not found\n    at EmailTemplateService.generateEmailContent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\templates\\templateService.ts:939:13)\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:80:54)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)"
}
2025-06-02 11:15:49 [ERROR]: Failed to handle email event d531fe4b-c160-405a-be8b-29acb58d7f58: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:15:49 [ERROR]: Failed to send email: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:15:49 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Template SUBMISSION_SUCCESS failed and no fallback content provided"
}
2025-06-02 11:16:13 [ERROR]: Template generation failed for SUBMISSION_SUCCESS: Template SUBMISSION_SUCCESS not found {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS not found\n    at EmailTemplateService.generateEmailContent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\templates\\templateService.ts:939:13)\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:80:54)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)"
}
2025-06-02 11:16:13 [ERROR]: Failed to handle email event 1f0f3172-18e8-462b-a9f4-3cedef0c7358: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:16:13 [ERROR]: Failed to send email: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:16:13 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Template SUBMISSION_SUCCESS failed and no fallback content provided"
}
2025-06-02 11:16:24 [ERROR]: Template generation failed for SUBMISSION_SUCCESS: Template SUBMISSION_SUCCESS not found {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS not found\n    at EmailTemplateService.generateEmailContent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\templates\\templateService.ts:939:13)\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:80:54)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)"
}
2025-06-02 11:16:24 [ERROR]: Failed to handle email event d999c08a-404e-4eca-bf5d-35d8bf6fc59a: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:16:24 [ERROR]: Failed to send email: Template SUBMISSION_SUCCESS failed and no fallback content provided {
  "service": "email-service",
  "stack": "Error: Template SUBMISSION_SUCCESS failed and no fallback content provided\n    at EmailHandler.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:96:17)\n    at EmailHandler.handleEmailEvent (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\handlers\\emailHandler.ts:41:22)\n    at EmailService.sendEmail (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\services\\emailService.ts:75:31)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\routes\\emailRoutes.ts:49:39\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:95:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\route.js:119:3)"
}
2025-06-02 11:16:24 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Template SUBMISSION_SUCCESS failed and no fallback content provided"
}
2025-06-02 11:22:42 [ERROR]: Failed to handle email event 8afaea35-3b35-4a48-89c9-629ae38fc39f: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:52:42 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "ANhD1nzPAEetx7j/Kn1/Cw.0",
    "mise-correlation-id": "74dec0a8-116a-4fb8-bb62-c791d4f1804b",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055240Z-r1c56577f965462jhC1MAAeb1w0000000fk00000000019rc",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:22:42 [ERROR]: Failed to send email: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:52:42 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "ANhD1nzPAEetx7j/Kn1/Cw.0",
    "mise-correlation-id": "74dec0a8-116a-4fb8-bb62-c791d4f1804b",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055240Z-r1c56577f965462jhC1MAAeb1w0000000fk00000000019rc",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:22:42 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "The specified sender domain has not been linked."
}
2025-06-02 11:23:55 [ERROR]: Failed to handle email event 66b41c2a-a4e0-4a0e-ad5d-d2edf9475846: Request body validation error. See property 'senderAddress' {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "date": "Mon, 02 Jun 2025 05:53:55 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "150",
    "connection": "keep-alive",
    "ms-cv": "SXdf6HWolUCOSgtEws3xWw.0",
    "mise-correlation-id": "bfbb4333-5bd6-42f7-983f-e01f4181b8e8",
    "x-azure-ref": "20250602T055353Z-r1c56577f96stwlphC1MAAttr80000000g7g00000000kdnw",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. See property 'senderAddress'",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. See property 'senderAddress'\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:23:55 [ERROR]: Failed to send email: Request body validation error. See property 'senderAddress' {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "date": "Mon, 02 Jun 2025 05:53:55 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "150",
    "connection": "keep-alive",
    "ms-cv": "SXdf6HWolUCOSgtEws3xWw.0",
    "mise-correlation-id": "bfbb4333-5bd6-42f7-983f-e01f4181b8e8",
    "x-azure-ref": "20250602T055353Z-r1c56577f96stwlphC1MAAttr80000000g7g00000000kdnw",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. See property 'senderAddress'",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. See property 'senderAddress'\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:23:55 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Request body validation error. See property 'senderAddress'"
}
2025-06-02 11:25:44 [ERROR]: Failed to handle email event 9956c949-5b39-40aa-b8ab-d4defc81ad55: Request body validation error. See property 'senderAddress' {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "date": "Mon, 02 Jun 2025 05:55:44 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "150",
    "connection": "keep-alive",
    "ms-cv": "NnEDDbkmGkWiZrF5vgZh/g.0",
    "mise-correlation-id": "8604e228-94fc-4ad8-a900-ef8691c4193c",
    "x-azure-ref": "20250602T055543Z-r1c56577f967d45nhC1MAA35s00000000670000000006p9b",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. See property 'senderAddress'",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. See property 'senderAddress'\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:25:44 [ERROR]: Failed to send email: Request body validation error. See property 'senderAddress' {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "date": "Mon, 02 Jun 2025 05:55:44 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "150",
    "connection": "keep-alive",
    "ms-cv": "NnEDDbkmGkWiZrF5vgZh/g.0",
    "mise-correlation-id": "8604e228-94fc-4ad8-a900-ef8691c4193c",
    "x-azure-ref": "20250602T055543Z-r1c56577f967d45nhC1MAA35s00000000670000000006p9b",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. See property 'senderAddress'",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. See property 'senderAddress'\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:25:44 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Request body validation error. See property 'senderAddress'"
}
2025-06-02 11:26:44 [ERROR]: Failed to handle email event a7ccc665-732d-4db2-b33d-80e41f9e25fd: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:56:43 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "5NFp+YZ1REOwNM2Qe4YwHA.0",
    "mise-correlation-id": "bd2c1424-1d3d-40a0-94d6-5d887adf7a3b",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055641Z-r1c56577f96248s5hC1MAAku340000000gqg00000000cfza",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:26:44 [ERROR]: Failed to send email: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:56:43 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "5NFp+YZ1REOwNM2Qe4YwHA.0",
    "mise-correlation-id": "bd2c1424-1d3d-40a0-94d6-5d887adf7a3b",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055641Z-r1c56577f96248s5hC1MAAku340000000gqg00000000cfza",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:26:44 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "The specified sender domain has not been linked."
}
2025-06-02 11:27:12 [ERROR]: Failed to handle email event 70e27698-d6d6-4a8a-a38a-a3c24a0b3dff: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:57:11 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "Tp4gQv0mX0+EyQc/LOFdaQ.0",
    "mise-correlation-id": "e2aabba8-02fe-4c4e-8f8b-bd03d65b7852",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055709Z-r1c56577f96stwlphC1MAAttr80000000g8g00000000g5xs",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:27:12 [ERROR]: Failed to send email: The specified sender domain has not been linked. {
  "service": "email-service",
  "name": "RestError",
  "code": "DomainNotLinked",
  "statusCode": 404,
  "details": {
    "xMsErrorCode": "DomainNotLinked",
    "date": "Mon, 02 Jun 2025 05:57:11 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "144",
    "connection": "keep-alive",
    "ms-cv": "Tp4gQv0mX0+EyQc/LOFdaQ.0",
    "mise-correlation-id": "e2aabba8-02fe-4c4e-8f8b-bd03d65b7852",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250602T055709Z-r1c56577f96stwlphC1MAAttr80000000g8g00000000g5xs",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "DomainNotLinked",
      "message": "The specified sender domain has not been linked.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: The specified sender domain has not been linked.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\src\\restError.ts:81:12)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:255:17)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\src\\deserializationPolicy.ts:159:43)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 11:27:12 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "The specified sender domain has not been linked."
}
2025-06-02 14:37:28 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:124:14\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:38:04 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:124:14\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:38:07 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:136:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:38:28 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:136:5\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:39:40 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:124:14\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:40:02 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:10:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:146:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:124:14\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 14:40:53 [ERROR]: Error in authentication middleware: JWT Secret is required for encryption {
  "service": "email-service",
  "stack": "Error: JWT Secret is required for encryption\n    at new EncryptionHelper (file:///C:/Users/prave/OneDrive/Desktop/communication-service/node_modules/@Mahe-5563/commons/dist/index.js:12:13)\n    at checkHMACDecryption (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\utils\\decryption.ts:11:28)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:147:59\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\src\\middleware\\validation.ts:124:14\n    at Layer.handle [as handle_request] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\express\\lib\\router\\layer.js:95:5)"
}
2025-06-02 18:28:25 [ERROR]: Email send handler error: Cannot read properties of undefined (reading 'to') {
  "service": "email-service",
  "stack": "TypeError: Cannot read properties of undefined (reading 'to')\n    at EmailController.handleEmailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\controller\\emailController.js:177:44)\n    at emailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\functions\\emailSend.js:23:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 18:28:35 [ERROR]: Email send handler error: Cannot read properties of undefined (reading 'to') {
  "service": "email-service",
  "stack": "TypeError: Cannot read properties of undefined (reading 'to')\n    at EmailController.handleEmailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\controller\\emailController.js:177:44)\n    at emailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\functions\\emailSend.js:23:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-02 18:29:30 [ERROR]: Email send handler error: Cannot read properties of undefined (reading 'to') {
  "service": "email-service",
  "stack": "TypeError: Cannot read properties of undefined (reading 'to')\n    at EmailController.handleEmailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\controller\\emailController.js:177:44)\n    at emailSend (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\dist\\functions\\emailSend.js:23:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:12:45 [ERROR]: Failed to handle email event 277be275-edcc-4bf2-8d67-3de84bd0f955: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:42:45 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "sonP+NguzUi7ufGAxVvbJg.0",
    "mise-correlation-id": "dda27d3c-3f1e-4558-9fa5-6c027ab23b5d",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T044244Z-r1c56577f96vnxpbhC1MAAc5s800000000p000000000mtqg",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:12:45 [ERROR]: Failed to send email: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:42:45 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "sonP+NguzUi7ufGAxVvbJg.0",
    "mise-correlation-id": "dda27d3c-3f1e-4558-9fa5-6c027ab23b5d",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T044244Z-r1c56577f96vnxpbhC1MAAc5s800000000p000000000mtqg",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:12:45 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Request body validation error. ContentBytes invalid. Should be base64."
}
2025-06-03 10:13:58 [ERROR]: Failed to handle email event 0b3f502e-1147-4eff-8558-4a19c851a91c: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:43:58 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "v5u03VhXpkqjjwGTSeBbRg.0",
    "mise-correlation-id": "b10b37a8-fcf3-4fc0-9aef-d0663863a020",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T044357Z-r1c56577f965w5vwhC1MAAxvzn0000000p6000000000k924",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:13:58 [ERROR]: Failed to send email: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:43:58 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "v5u03VhXpkqjjwGTSeBbRg.0",
    "mise-correlation-id": "b10b37a8-fcf3-4fc0-9aef-d0663863a020",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T044357Z-r1c56577f965w5vwhC1MAAxvzn0000000p6000000000k924",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:13:58 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Request body validation error. ContentBytes invalid. Should be base64."
}
2025-06-03 10:22:06 [ERROR]: Failed to handle email event 1c543126-7083-4749-a760-955ce840813e: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:52:06 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "RTlWpMXCpEGiIDK9CtR1AQ.0",
    "mise-correlation-id": "39dc2b84-8faa-45f7-8dab-2c470f219648",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T045205Z-r1c56577f965w5vwhC1MAAxvzn0000000pbg000000002ebq",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:22:06 [ERROR]: Failed to send email: Request body validation error. ContentBytes invalid. Should be base64. {
  "service": "email-service",
  "name": "RestError",
  "code": "BadRequest",
  "statusCode": 400,
  "details": {
    "xMsErrorCode": "BadRequest",
    "date": "Tue, 03 Jun 2025 04:52:06 GMT",
    "content-type": "application/json; charset=utf-8",
    "content-length": "161",
    "connection": "keep-alive",
    "ms-cv": "RTlWpMXCpEGiIDK9CtR1AQ.0",
    "mise-correlation-id": "39dc2b84-8faa-45f7-8dab-2c470f219648",
    "api-supported-versions": "2021-10-01-preview, 2023-01-15-preview, 2023-03-31, 2024-07-01-preview, 2025-01-15-preview",
    "x-azure-ref": "20250603T045205Z-r1c56577f965w5vwhC1MAAxvzn0000000pbg000000002ebq",
    "strict-transport-security": "max-age=31536000;includeSubDomains",
    "x-cache": "CONFIG_NOCACHE",
    "error": {
      "code": "BadRequest",
      "message": "Request body validation error. ContentBytes invalid. Should be base64.",
      "target": null,
      "details": null,
      "innererror": null
    }
  },
  "stack": "RestError: Request body validation error. ContentBytes invalid. Should be base64.\n    at new RestError (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-rest-pipeline\\dist\\commonjs\\restError.js:19:16)\n    at handleErrorResponse (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:148:19)\n    at deserializeResponseBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\deserializationPolicy.js:83:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-06-03 10:22:06 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Request body validation error. ContentBytes invalid. Should be base64."
}
2025-06-03 10:37:16 [ERROR]: Failed to handle email event d1ecdce6-5284-42e8-8646-f8d85e653dc8: Error "message.attachments.name cannot be null or undefined." occurred in serializing the payload - undefined. {
  "service": "email-service",
  "stack": "Error: Error \"message.attachments.name cannot be null or undefined.\" occurred in serializing the payload - undefined.\n    at serializeRequestBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serializationPolicy.js:120:19)\n    at Object.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serializationPolicy.js:31:17)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@typespec\\ts-http-runtime\\dist\\commonjs\\pipeline.js:54:31\n    at HttpPipeline.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@typespec\\ts-http-runtime\\dist\\commonjs\\pipeline.js:57:16)\n    at EmailRestApiClient.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serviceClient.js:47:30)\n    at EmailRestApiClient.sendOperationRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serviceClient.js:109:44)\n    at directSendOperation (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:568:32)\n    at LroImpl.sendOperation [as sendOperationFn] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:579:40)\n    at LroImpl.sendInitialRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:528:21)\n    at init (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-lro\\dist\\commonjs\\http\\operation.js:196:40)"
}
2025-06-03 10:37:16 [ERROR]: Failed to send email: Error "message.attachments.name cannot be null or undefined." occurred in serializing the payload - undefined. {
  "service": "email-service",
  "stack": "Error: Error \"message.attachments.name cannot be null or undefined.\" occurred in serializing the payload - undefined.\n    at serializeRequestBody (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serializationPolicy.js:120:19)\n    at Object.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serializationPolicy.js:31:17)\n    at C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@typespec\\ts-http-runtime\\dist\\commonjs\\pipeline.js:54:31\n    at HttpPipeline.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@typespec\\ts-http-runtime\\dist\\commonjs\\pipeline.js:57:16)\n    at EmailRestApiClient.sendRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serviceClient.js:47:30)\n    at EmailRestApiClient.sendOperationRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-client\\dist\\commonjs\\serviceClient.js:109:44)\n    at directSendOperation (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:568:32)\n    at LroImpl.sendOperation [as sendOperationFn] (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:579:40)\n    at LroImpl.sendInitialRequest (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\communication-email\\dist\\index.js:528:21)\n    at init (C:\\Users\\prave\\OneDrive\\Desktop\\communication-service\\node_modules\\@azure\\core-lro\\dist\\commonjs\\http\\operation.js:196:40)"
}
2025-06-03 10:37:16 [ERROR]: Email send failed {
  "service": "email-service",
  "error": "Error \"message.attachments.name cannot be null or undefined.\" occurred in serializing the payload - undefined."
}
